##################################################
#
# Include base configuration
#
include-file ${ENV:CONFIG_BASE}bootstrap.conf

include-file ../../blade_config/fields.conf

include-file ${ENV:CONFIG_BASE}fields.conf

include-file ../../blade_config/bootstrap.conf


datasrc-name ${ADAPTER_NAME}${THIS_LEG}-%h

##################################################
#
# Logging configuration
#
log-dir %r/var
log-level INFO

log-use-parent-handlers TRUE

event-log event-${ADAPTER_NAME}.log

##################################################
#
# Local DataSource peer-id
#
datasrc-id            ${THIS_LEG}${DATASRC_ID}

##################################################
#
# Liberator peer
#
add-peer
        local-type              active|contrib
        remote-name             liberator${THIS_LEG}
        remote-id               ${LIBERATOR${THIS_LEG}_DATASRCID}
        addr                    ${LIBERATOR${THIS_LEG}_HOST}
        port                    ${LIBERATOR${THIS_LEG}_DATASRCPORT}
        heartbeat-time          15
        heartbeat-slack-time    5
end-peer

if "${FAILOVER}" == "ENABLED"
        add-peer
                local-type              active|contrib
                remote-name             liberator${OTHER_LEG}
                remote-id               ${LIBERATOR${OTHER_LEG}_DATASRCID}
                addr                    ${LIBERATOR${OTHER_LEG}_HOST}
                port                    ${LIBERATOR${OTHER_LEG}_DATASRCPORT}
                heartbeat-time          15
                heartbeat-slack-time    5
        end-peer
endif

##################################################
#
# Transformer peer
#
add-peer
        local-type              active|contrib
        remote-name             transformer${THIS_LEG}
        remote-id               ${TRANSFORMER${THIS_LEG}_DATASRCID}
        addr                    ${TRANSFORMER${THIS_LEG}_HOST}
        port                    ${TRANSFORMER${THIS_LEG}_DATASRCPORT}
        heartbeat-time          15
        heartbeat-slack-time    5
end-peer

if "${FAILOVER}" == "ENABLED"
        add-peer
                local-type              active|contrib
                remote-name             transformer${OTHER_LEG}
                remote-id               ${TRANSFORMER${OTHER_LEG}_DATASRCID}
                addr                    ${TRANSFORMER${OTHER_LEG}_HOST}
                port                    ${TRANSFORMER${OTHER_LEG}_DATASRCPORT}
                heartbeat-time          15
                heartbeat-slack-time    5
        end-peer
endif